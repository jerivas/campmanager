{% extends "reports/print_base.html" %}

{% block extrastyle %}
{{ block.super }}
<style>
    @media screen {
        table {border: 0;}
    }
    @media print {
        table {
            width: 100%;
            font-size: 16px;
            line-height: 32px;
        }
        table, th, td {
            border-collapse: collapse;
            border: 1px solid black;
        }
        th, td {padding: 0 10px;}
    }
</style>
{% endblock extrastyle %}

{% block title %}Reporte de gafetes{% endblock title %}

{% block breadcrumbs %}
<ul>
    <li><a href="{% url 'admin:index' %}">Inicio</a></li>
    <li><a href="">Reportes</a></li>
    <li>Reporte de gafetes</li>
</ul>
{% endblock %}

{% block pretitle %}
<ul class="grp-messagelist">
    <li class="grp-info">Fecha y hora de generaci√≥n del reporte: {% now "DATETIME_FORMAT" %}</li>
</ul>
{% endblock %}

{% block content_title %}
    <h1>Reporte de gafetes ({{badge_count}})</h1>
{% endblock %}

{% block content %}
<div class="g-d-c">
{% for small_group in small_groups %}
    {% ifchanged small_group.generation %}
    {% if not forloop.first %}
    </div>
    {% endif %}
    <div class="grp-module g-d-12 grp-collapse">
        <h2 class="grp-collapse-handler">
            {{small_group.get_generation_display}}
        </h2>
    {% endifchanged %}
        {% with small_group.get_members as members %}    
        <div class="grp-module g-d-12 grp-collapse grp-closed no-break">
            <h3 class="grp-collapse-handler">
                {{small_group}} ({{members|length}})
            </h3>
            <table class="big grp-full-width">
                <thead>
                    <tr>
                        <th>Nombre</th>
                        <th>Gafete</th>
                    </tr>
                </thead>
                <tbody>
                    {% for member in members %}    
                    <tr>
                        <th>{{member}}</th>
                        <td>{{member.badge_name}}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% endwith %}
{% endfor %}
    </div>
</div>
{% endblock content %}
