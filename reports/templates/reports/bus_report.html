{% extends "reports/print_base.html" %}

{% block title %}Reporte de buses{% endblock title %}

{% block breadcrumbs %}
<ul>
    <li><a href="{% url 'admin:index' %}">Inicio</a></li>
    <li><a href="">Reportes</a></li>
    <li>Reporte de buses</li>
</ul>
{% endblock %}

{% block pretitle %}
<ul class="grp-messagelist">
    <li class="grp-info">Fecha y hora de generación del reporte: {% now "DATETIME_FORMAT" %}</li>
</ul>
{% endblock %}

{% block content_title %}
    <h1>Reporte de buses</h1>
{% endblock %}

{% block content %}
<div class="g-d-c">
{% for small_group in small_groups %}
    {% ifchanged small_group.bus %}
    {% if not forloop.first %}
            </tbody>
        </table>
    </div>
    {% endif %}
    <div class="grp-module g-d-16 grp-collapse grp-closed">
        <h2 class="grp-collapse-handler">
            {{small_group.get_bus_display|default:"Ágapes sin bus asignado"}}
        </h2>
        <table class="big grp-full-width">
            <thead>
                <tr>
                    <th>Ágape</th>
                    <th>Líder</th>
                    <th>Generación</th>
                    <th>Integrantes</th>
                </tr>
            </thead>
            <tbody>
    {% endifchanged %}
                <tr>
                    <th>{{small_group}}</th>
                    <td>{{small_group.counselor}}</td>
                    <td>{{small_group.get_generation_display}}</td>
                    <td>{{small_group.get_attendants|length}}</td>
                </tr>
    {% if forloop.last %}
            </tbody>
        </table>
    </div>
    {% endif %}
{% endfor %}
</div>
{% endblock content %}
